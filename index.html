<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sgr & SIDM</title>
  <style>
    @import url('https://rsms.me/inter/inter.css');

    html {
      font-family: 'Inter', sans-serif;
    }

    @supports (font-variation-settings: normal) {
      html {
        font-family: 'Inter var', sans-serif;
      }
    }


    body {
      margin: 0;
      text-align: center;
    }

    main {
      padding-bottom: 60px;
    }
  </style>


  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="icon/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="icon/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="icon/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="icon/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="icon/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="icon/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="icon/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="icon/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="icon/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="icon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="icon/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="icon/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="icon/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="icon/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="icon/mstile-150x150.png" />
  <meta name="msapplication-wide310x150logo" content="icon/mstile-310x150.png" />
  <meta name="msapplication-square310x310logo" content="icon/mstile-310x310.png" />

</head>

<body>
  <main>
    <img src="icon/android-chrome-512x512.png" width="192" style="margin-top: 32px;">

    <h1>Sgr &amp; SIDM</h1>

    <p>
      <a href="/sgr-sidm-viz/high-res-still/">3D viewer: final high-resolution snapshots of the streams</a>
    </p>

    <p>
      <a href="/sgr-sidm-viz/low-res-animated/">3D viewer: low-resolution animation of the stream evolution</a>
    </p>

    <p>Video:</p>

    <video src="/movies/cdm_movie.mp4" width="49%" style="display: inline;"></video>
    <video src="/movies/sidm_movie.mp4" width="49%" style="display: inline;"></video>
    <div class="controls">
      <button type="button" id="playstart">play (start together)</button>
      <button type="button" id="playend">play (end together)</button>
      <button type="button" id="restart">restart</button>
      <br>
      <br>
      <label>
        speed (<span id="currentspeed">1x</span>)
        <input type="range" id="playspeed" min="0" max="200" step="10" value="100">
      </label>
    </div>

  </main>

  <script type="module">
    const playBtn = document.getElementById("playstart");
    const endBtn = document.getElementById("playend");
    const restBtn = document.getElementById("restart");
    const videos = Array.from(document.getElementsByTagName("video"));
    const speed = document.getElementById("playspeed");
    const speedtext = document.getElementById("currentspeed");

    let maxDuration = 0;
    videos.forEach(v => {
      v.addEventListener('loadedmetadata', () => {
        maxDuration = Math.max(maxDuration, v.duration);
      });
    });

    playBtn.addEventListener("click", () => {
      videos.forEach(v => {
        v.play();
      });
    });

    endBtn.addEventListener("click", () => {
      videos.forEach(v => {
        setTimeout(() => { v.play() }, (maxDuration - v.duration) * 1000)
      });
    });

    restBtn.addEventListener("click", () => {
      videos.forEach(v => {
        v.pause();
        v.currentTime = 0;
      })
    })

    speed.addEventListener("change", (e) => {
      const s = e.target.value / 100;
      videos.forEach(v => {
        v.playbackRate = s;
        speedtext.innerText = `${s}x`
      })
    })
  </script>
</body>

</html>