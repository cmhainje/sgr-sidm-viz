import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as F,P as y,W as A,a as m,B as p,b as P,V as W,O as z,G as B,T as R,c as _,A as E}from"./lil-gui.esm-C5Hipvuz.js";async function w(t){const a=await(await fetch(`/sgr-sidm-viz/${t}`)).arrayBuffer(),o=new Float32Array(a),k=new p;return k.setAttribute("position",new P(o,3)),k}function H(){var t=128,a=document.createElement("canvas");a.width=t,a.height=t;var o=a.getContext("2d"),k=t/2,G=t/2,M=t/2;o.beginPath(),o.arc(k,G,M,0,2*Math.PI,!1),o.closePath(),o.fillStyle="#FFFFFF",o.fill();const g=new R(a);return g.needsUpdate=!0,g}const d=new F,T=window.innerWidth/window.innerHeight,l=new y(75,T,.1,1e3),n=new A({antialias:!0});n.setSize(window.innerWidth,window.innerHeight);n.setPixelRatio(window.devicePixelRatio);document.body.appendChild(n.domElement);const I=H();function c(t=.3,a=1){return new _({color:16777215,size:t,opacity:a,transparent:a<1,map:I,blending:E,depthTest:!1})}const e={mw:c(.1,.4),sun:c(2),cdmStar:c(),cdmDark:c(),sidmStar:c(),sidmDark:c()},L=await w("data/mw_disk.bin"),O=new m(L,e.mw);d.add(O);const U=await w("data/cdm_star.bin"),h=new m(U,e.cdmStar);d.add(h);const V=await w("data/cdm_dark.bin"),v=new m(V,e.cdmDark);v.visible=!1;d.add(v);const $=await w("data/sidm_star.bin"),C=new m($,e.sidmStar);C.visible=!1;d.add(C);const j=await w("data/sidm_dark.bin"),S=new m(j,e.sidmDark);S.visible=!1;d.add(S);const D=new p,X=new Float32Array([-8,0,0]);D.setAttribute("position",new P(X,3));e.sun.color.set(16691788);const Y=new m(D,e.sun);d.add(Y);l.position.y=-200;l.up=new W(0,0,1);const i=new z(l,n.domElement);i.enableDamping=!0;i.dampingFactor=.05;i.screenSpacePanning=!1;i.minDistance=1;i.maxDistance=300;i.saveState();const u=new B,x={resetCamera:()=>{i.reset()},resetSettings:()=>{u.reset()}};u.add(x,"resetCamera");u.add(x,"resetSettings");const r={stars:!0,starColor:"#66ccee",darkMatter:!1,darkColor:"#ee6677"},b=u.addFolder("CDM");b.add(r,"stars");b.addColor(r,"starColor");b.add(r,"darkMatter");b.addColor(r,"darkColor");const s={stars:!1,starColor:"#ccbb44",darkMatter:!1,darkColor:"#aa3377"},f=u.addFolder("SIDM");f.add(s,"stars");f.addColor(s,"starColor");f.add(s,"darkMatter");f.addColor(s,"darkColor");function q(){h.visible=r.stars,v.visible=r.darkMatter,C.visible=s.stars,S.visible=s.darkMatter,e.cdmStar.color.set(r.starColor),e.cdmDark.color.set(r.darkColor),e.sidmStar.color.set(s.starColor),e.sidmDark.color.set(s.darkColor),i.update(),n.render(d,l)}n.setAnimationLoop(q);window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio)});
