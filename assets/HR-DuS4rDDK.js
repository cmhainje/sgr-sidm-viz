import{S as A,P as z,W as R,a as m,B as D,b as P,V as E,O as H,G as W,T as B,c as T,A as _}from"./lil-gui.esm-D_7FSpI2.js";async function u(t){const a=await(await fetch(`/sgr-sidm-viz/${t}`)).arrayBuffer(),i=new Float32Array(a),p=new D;return p.setAttribute("position",new P(i,3)),p}function L(){var t=128,a=document.createElement("canvas");a.width=t,a.height=t;var i=a.getContext("2d"),p=t/2,F=t/2,y=t/2;i.beginPath(),i.arc(p,F,y,0,2*Math.PI,!1),i.closePath(),i.fillStyle="#FFFFFF",i.fill();const C=new B(a);return C.needsUpdate=!0,C}const d=new A,I=window.innerWidth/window.innerHeight,l=new z(75,I,.1,1e3),s=new R({antialias:!0});s.setSize(window.innerWidth,window.innerHeight);s.setPixelRatio(window.devicePixelRatio);document.body.appendChild(s.domElement);const $=L();function c(t=.3,a=1){return new T({color:16777215,size:t,opacity:a,transparent:a<1,map:$,blending:_,depthTest:!1})}const e={mw:c(.1,.4),sun:c(2),cdmStar:c(),cdmDark:c(),sidmStar:c(),sidmDark:c()},O=await u("data/mw_disk.bin"),U=new m(O,e.mw);d.add(U);const V=await u("data/cdm_star.bin"),M=new m(V,e.cdmStar);d.add(M);const j=await u("data/cdm_dark.bin"),v=new m(j,e.cdmDark);v.visible=!1;d.add(v);const N=await u("data/sidm_star.bin"),S=new m(N,e.sidmStar);S.visible=!1;d.add(S);const X=await u("data/sidm_dark.bin"),f=new m(X,e.sidmDark);f.visible=!1;d.add(f);const x=new D,Y=new Float32Array([-8,0,0]);x.setAttribute("position",new P(Y,3));e.sun.color.set(16691788);const q=new m(x,e.sun);d.add(q);l.position.y=-200;l.up=new E(0,0,1);const o=new H(l,s.domElement);o.enableDamping=!0;o.dampingFactor=.05;o.screenSpacePanning=!1;o.minDistance=1;o.maxDistance=300;o.saveState();const w=new W,G={resetCamera:()=>{o.reset()},resetSettings:()=>{w.reset()}},h=document.createElement("div");h.style="margin: 4px 0; padding: 0 4px;";const k=document.createElement("div");k.className="gui-message";k.innerHTML=`
    <p><b>High-resolution still</b></p>
    <p><a href="/sgr-sidm-viz/">Go back to the landing page</a></p>
    <p><a href="/sgr-sidm-viz/low-res-animated/">Go to the low-resolution animation</a></p>
`;h.append(k);w.$children.prepend(h);w.add(G,"resetCamera").name("Reset camera");w.add(G,"resetSettings").name("Reset settings");const n={stars:!0,starColor:"#66ccee",darkMatter:!1,darkColor:"#ee6677"},g=w.addFolder("CDM");g.add(n,"stars").name("Show stars");g.addColor(n,"starColor").name("Star color");g.add(n,"darkMatter").name("Show DM");g.addColor(n,"darkColor").name("DM color");const r={stars:!1,starColor:"#ccbb44",darkMatter:!1,darkColor:"#aa3377"},b=w.addFolder("SIDM");b.add(r,"stars").name("Show stars");b.addColor(r,"starColor").name("Star color");b.add(r,"darkMatter").name("Show DM");b.addColor(r,"darkColor").name("DM color");function J(){M.visible=n.stars,v.visible=n.darkMatter,S.visible=r.stars,f.visible=r.darkMatter,e.cdmStar.color.set(n.starColor),e.cdmDark.color.set(n.darkColor),e.sidmStar.color.set(r.starColor),e.sidmDark.color.set(r.darkColor),o.update(),s.render(d,l)}s.setAnimationLoop(J);window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio)});
