import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as y,P as A,W as z,a as m,B as D,b as P,V as R,O as H,G as W,T as B,c as T,A as _}from"./lil-gui.esm-C5Hipvuz.js";async function u(t){const a=await(await fetch(`/sgr-sidm-viz/${t}`)).arrayBuffer(),o=new Float32Array(a),p=new D;return p.setAttribute("position",new P(o,3)),p}function L(){var t=128,a=document.createElement("canvas");a.width=t,a.height=t;var o=a.getContext("2d"),p=t/2,F=t/2,E=t/2;o.beginPath(),o.arc(p,F,E,0,2*Math.PI,!1),o.closePath(),o.fillStyle="#FFFFFF",o.fill();const h=new B(a);return h.needsUpdate=!0,h}const d=new y,I=window.innerWidth/window.innerHeight,l=new A(75,I,.1,1e3),s=new z({antialias:!0});s.setSize(window.innerWidth,window.innerHeight);s.setPixelRatio(window.devicePixelRatio);document.body.appendChild(s.domElement);const $=L();function c(t=.3,a=1){return new T({color:16777215,size:t,opacity:a,transparent:a<1,map:$,blending:_,depthTest:!1})}const e={mw:c(.1,.4),sun:c(2),cdmStar:c(),cdmDark:c(),sidmStar:c(),sidmDark:c()},O=await u("data/mw_disk.bin"),U=new m(O,e.mw);d.add(U);const V=await u("data/cdm_star.bin"),M=new m(V,e.cdmStar);d.add(M);const j=await u("data/cdm_dark.bin"),v=new m(j,e.cdmDark);v.visible=!1;d.add(v);const N=await u("data/sidm_star.bin"),f=new m(N,e.sidmStar);f.visible=!1;d.add(f);const X=await u("data/sidm_dark.bin"),k=new m(X,e.sidmDark);k.visible=!1;d.add(k);const x=new D,Y=new Float32Array([-8,0,0]);x.setAttribute("position",new P(Y,3));e.sun.color.set(16691788);const q=new m(x,e.sun);d.add(q);l.position.y=-200;l.up=new R(0,0,1);const i=new H(l,s.domElement);i.enableDamping=!0;i.dampingFactor=.05;i.screenSpacePanning=!1;i.minDistance=1;i.maxDistance=300;i.saveState();const w=new W,G={resetCamera:()=>{i.reset()},resetSettings:()=>{w.reset()}},C=document.createElement("div");C.style="margin: 4px 0; padding: 0 4px;";const S=document.createElement("div");S.className="gui-message";S.innerHTML=`
    <p><b>High-resolution still</b></p>
    <p><a href="/sgr-sidm-viz/">Go back to the landing page</a></p>
    <p><a href="/sgr-sidm-viz/low-res-animated/">Go to the low-resolution animation</a></p>
`;C.append(S);w.$children.prepend(C);w.add(G,"resetCamera").name("Reset camera");w.add(G,"resetSettings").name("Reset settings");const n={stars:!0,starColor:"#66ccee",darkMatter:!1,darkColor:"#ee6677"},b=w.addFolder("CDM");b.add(n,"stars").name("Enable stars");b.addColor(n,"starColor").name("Star color");b.add(n,"darkMatter").name("Enable DM");b.addColor(n,"darkColor").name("DM color");const r={stars:!1,starColor:"#ccbb44",darkMatter:!1,darkColor:"#aa3377"},g=w.addFolder("SIDM");g.add(r,"stars").name("Enable stars");g.addColor(r,"starColor").name("Star color");g.add(r,"darkMatter").name("Enable DM");g.addColor(r,"darkColor").name("DM color");function J(){M.visible=n.stars,v.visible=n.darkMatter,f.visible=r.stars,k.visible=r.darkMatter,e.cdmStar.color.set(n.starColor),e.cdmDark.color.set(n.darkColor),e.sidmStar.color.set(r.starColor),e.sidmDark.color.set(r.darkColor),i.update(),s.render(d,l)}s.setAnimationLoop(J);window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio)});
